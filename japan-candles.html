<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
    <canvas id="myCandle" width="500" height="500" style="border:1px solid #d3d3d3;">
    </canvas>
    <script>
      var c = document.getElementById("myCandle");
      var ctx = c.getContext("2d");

      /*const candleData = {
        minute: 1,
        open: 150,
        high: 160,
        low: 40,
        close: 120
      };*/

      const candleData = [
        {
          minute: 1,
          open: 150,
          high: 160,
          low: 40,
          close: 120
        },
        { 
          minute: 2,
          open: 130,
          high: 160,
          low: 70,
          close: 150
        },
        { 
          minute: 3,
          open: 200,
          high: 250,
          low: 130,
          close: 140
        }
      ];
      


      // // ctx.fillStyle = "black";
      // //ctx.fillRect(40, 290, 1, 10);
      // drawLine(ctx, x1, y1, x1, y2);

      // //  // ctx.fillStyle = "green";
      // // // ctx.fillRect(30,300,20,80);
      // drawRectangle(ctx, x, y, width, height, color);

      // // // ctx.fillStyle = "black";
      // // // ctx.fillRect(40, 380, 1, 20);
      // drawLine(ctx, x1, Uy1, x1, Uy2);
      



      function drawRectangle(context, x, y, width, height, color) {
        context.fillStyle = color;
        context.fillRect(x, y, width, height);
      }

      function drawLine(context, x1, y1, x2, y2, color='black') {
        context.beginPath();
        context.moveTo(x1-0.5, y1-0.5);
        context.lineTo(x2-0.5, y2-0.5);
        context.strokeStyle = color;
        context.stroke();
      }

      function drawCandle(context, candleData) {
        // drawRectangle
        const x = candleData.minute * 30 + 30;
        const y = 480 - Math.max(candleData.close, candleData.open);
        const width = 20;
        const height = Math.abs(candleData.close - candleData.open);
        const color = (candleData.open < candleData.close) ? 'green' : 'red';

        // Common for both lines
        const x1 = candleData['minute'] * 30 + 40;

        // Lower line
        const y1 = 480 - candleData.low;
        const y2 = 480 - Math.min(candleData.close, candleData.open);

        // UpperLine
        const Uy1 = 480 - Math.max(candleData.close, candleData.open);
        const Uy2 = 480 - candleData.high;

        drawLine(ctx, x1, y1, x1, y2);
        drawRectangle(ctx, x, y, width, height, color);
        drawLine(ctx, x1, Uy1, x1, Uy2);
      }

      // drawCandle(ctx, candleData);

      function drawCandles(ctx, candleData) {
        let numberOfCandle = 0;
        for (let numberOfCandle = 0; numberOfCandle < candleData.length; numberOfCandle++) {
          
          drawCandle(ctx, candleData[numberOfCandle]);

        }
      }

      drawCandles(ctx, candleData);


    </script>
  
</body>
</html>